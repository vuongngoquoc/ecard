<div id="show_personalize_table" class="elm-toggle-collapse" >
	<div class="temp_personalize col-sm-9">
		<form name="ecardmax_personalize" class="form-horizontal" method="post" action="index.php">
		<input type="hidden" name="step" value="{'step'}" />
		<input type="hidden" name="what" value="send_to_friends" />
		<input type="hidden" name="list_email" value="" />
		<input type="hidden" name="cs_music_filename" value="{'cs_music_filename'}" />
		<input type="hidden" name="cs_music_id" value="{'cs_music_id'}" />
		<input type="hidden" name="iv_id" value="{'iv_id'}" />
		<input type="hidden" name="invite_message" value="" />
		<input type="hidden" name="invite_user_photo_filename" value="{'invite_user_photo_filename'}" />
		<div class="table_border">
			<div class="info_card_send">
            
            	<div class="panel panel-default">
                    <div class="panel-heading">{'invite_basic_message_event_name'}</div>
                    <div class="panel-body">
					<div class="Error_Message" style="padding:5px;display:none" id="show_error_message_event_name" >
                    {'invite_show_error_message_event_name'}</div>
                    <div class="input-group input-group-sm h-space-b-10">
                          <span class="input-group-addon" id="sizing-addon3">
                          <i class="fa fa-user"></i> <span class="only-desktop">{'invite_basic_message_event_name'}</span></span>
                          <input class="form-control" onkeydown="showid2('show_error_message_event_name','none');" id="invite_title" name="invite_title" value="{'invite_title'}" type="text" aria-describedby="sizing-addon" />                       
                        </div> 
					</div>
				</div>
                
                
            	<div class="panel panel-default">
                    <div class="panel-heading">{'fieldset_title_sender_information'}</div>
                    <div class="panel-body">
                        <div class="input-group input-group-sm h-space-b-10">
                          <span class="input-group-addon" id="sizing-addon3">
                          <i class="fa fa-user"></i> <span class="only-desktop">{'fieldset_sender_name'}</span></span>
                          <input onkeydown="showid2('show_error_message_sender_info','none');" id="cs_from_name" class="form-control" name="cs_from_name" value="{'cs_from_name'}" type="text" {'cs_from_name_read_only_if_login'} aria-describedby="sizing-addon" />                       
                        </div>   
                        <div class="Error_Message" style="padding:5px;display:none" id="show_error_message_sender_info" ></div>       
                        <div class="input-group input-group-sm">
                          <span class="input-group-addon" id="sizing-addon3">
                          @ <span class="only-desktop">{'fieldset_sender_email'}</span></span>
                          <input onkeydown="showid2('show_error_message_sender_info','none');"  onblur="if(!valid_email(this.value)){this.value='';ShowDivInvalidEmail('show_error_message_sender_info');}" id="cs_from_email" class="form-control" name="cs_from_email" value="{'cs_from_email'}" type="text" {'cs_from_name_read_only_if_login'} aria-describedby="sizing-addon" />                          
                        </div>
                        <div class="Error_Message" style="padding:5px;display:none" id="show_error_message_sender_info" ></div>
                    </div>
                </div>
				
                <div class="panel panel-default">
                    <div class="panel-heading">{'fieldset_title_recipient_information'}</div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label class="col-sm-3">{'fieldset_number_recipient'}</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                <input aria-describedby="sizing-addon" class="form-control  input-sm no-border-r" onkeypress="return isNumberKey(event)" onfocus="original_value=this.value;" onchange="CheckFieldNumber(this.value);" id="re_num" name="re_num" value="{'cf_recipient_default'}" type="text" /> 
                                <div class="input-group-addon no-backg">
                                <small class="text-danger">{'fieldset_maximum_is'} {'cf_max_friend_email'}</small>
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3">{'add_from_address_book'}</label>
                            <div class="col-sm-8">
                                <select aria-describedby="sizing-addon" class="form-control input-sm" onchange="AddContactGroupToList(this.value);">
                                    <option value="0">{'select_group'}</option>
                                    {'show_contact_group_options'}
                                </select>
                                <p class="text-right"><small>{'select_or_choise'}</small></p>
                            </div>
                        </div>
                                        
                        <div class="form-group">
                            <div class="col-sm-1 add-more pull-right text-left">
                            <a href="javascript:;" class="text-right" onclick="AddMore();">
                                <i class="fa fa-plus"></i></a>	 
                            </div>
                            <label class="col-sm-3">Recipient</label>
                            <div class="col-sm-8" id="show_recipient_loop"></div>
                        </div>
        
                        <div class="clearfix"></div>
                    </div>
                </div>
        
			</div>
		</div>
		
        <div class="panel panel-default">
        	<div class="panel-heading">{'invite_personal_message_show_map_reminder'}</div>
                <div class="panel-body">
                <div class="form-group has-feedback">
                	<div class="col-sm-12">{'invite_personal_message_would_you_like_show_map'}
                     <div class="checkbox-inline">
                     <label>
                    <input onclick="ShowMapYes();" type="radio" value="1" name="show_map"> 
                    <strong>{'invite_personal_message_say_yes'}</strong>
                    </label>
                    </div>
                     <div class="checkbox-inline">
                    <label>
                    <input onclick="showid2('show_map_table','none')" type="radio" value="0" name="show_map" checked="checked"> 
                    <strong>{'invite_personal_message_say_no'}</strong>
                    </label>
                    </div>
                	</div>
                </div>
                <div id="show_map_table" style="display:none"  >
                	<div class="form-group has-feedback">
                        <label class="col-sm-2">{'invite_basic_message_street_address'}</label>
                        <div class="col-sm-6">
                            <input class="form-control input-sm" type="text" name="invite_map_address" id="invite_map_address" size="33" value="{'invite_map_address'}">
                        </div>
                    </div>
                    <div class="form-group has-feedback">    
                        <label class="col-sm-2 clearfix">{'invite_basic_message_city'}</label>
                        <div class="col-sm-3">
                            <input class="form-control input-sm" type="text" name="invite_map_city" id="invite_map_city" size="33" value="{'invite_map_city'}">
                        </div>
                     </div>
                     <div class="form-group has-feedback">   
                        <label class="col-sm-2 clearfix">{'invite_basic_message_state'}</label>
                        <div class="col-sm-3">
                            <input class="form-control input-sm" type="text" name="invite_map_state" id="invite_map_state" size="33" value="{'invite_map_state'}">
                        </div>
                     </div>
                     <div class="form-group has-feedback">
                        <label class="col-sm-2 clearfix">{'invite_basic_message_zipcode_country'}</label>
                        
                        <div class="col-sm-3">
                            <input class="form-control input-sm" type="text" name="invite_map_zipcode" id="invite_map_zipcode" size="33" value="{'invite_map_zipcode'}">
                        </div>
                     </div>
                     <div class="form-group has-feedback">
                        <label class="col-sm-2 clearfix"></label>
                        <div class="col-sm-6">
                            <button type="button" class="btn btn-sm btn-default btn-my-site" onclick="ViewMap();" >
                            <i class="fa fa-search-plus padding5"></i>{'invite_button_view_map'}</button>
                        </div>
                    </div>
                </div>
                <div>
                </div>
                <div class="form-group has-feedback">
                    	<div class="col-sm-12">
                            {'invite_personal_message_would_you_like_reminder'}
                            <div class="checkbox-inline">
                            <label>
                            <input onClick="ShowAddReminderYes();" type="radio" value="1" name="add_reminder"> 
                            <strong>{'invite_personal_message_say_yes'}</strong>
                            </label>
                            </div>
                             <div class="checkbox-inline">
                            <label>
                            <input onClick="showid2('show_reminder_table','none')" type="radio" value="0" name="add_reminder" checked="checked"> 
                            <strong>{'invite_personal_message_say_no'}</strong>
                            </label>
                            </div>
                        </div>
                    </div>
	
                    <div id="show_reminder_table" style="display:none">
                    <div class="form-group has-feedback">
                        <label class="col-sm-2">{'myaccount_user_birthday'}</label>
                        <div class="col-sm-2 text-datepicker">
                        <input class="datepicker form-control input-sm " type="text" name="time_end_textbox3" id="time_end_textbox3" value="" /> 
                        <span class="fa fa-calendar-plus-o form-control-feedback" aria-hidden="true"></span>
                        </div>
                        <div class="col-sm-4">
                        <p class="date-note">{'ins_date_caption'}</p>
                        </div>
                    </div>
                    <div class="form-group has-feedback">
                        <label class="col-sm-2">{'invite_personal_message_reminder_guest'}</label>
                        <div class="col-sm-2">
                        <select name="invite_rm_datebefore">
							<option value="0">{'addressbook_txt_reminder_me_on_date'}</option>
							<option value="1">{'addressbook_txt_reminder_me_1day_b4'}</option>
							<option value="2">{'addressbook_txt_reminder_me_2day_b4'}</option>
							<option value="3">{'addressbook_txt_reminder_me_3day_b4'}</option>
							<option value="7">{'addressbook_txt_reminder_me_7day_b4'}</option>
							<option value="14">{'addressbook_txt_reminder_me_14day_b4'}</option>
						</select>
                        </div>
                    </div>
                    </div>
            </div>
        </div>        
		<div class="panel panel-default">
            <div class="panel-body">
                <div class="form-group">
                    <div class="col-sm-8">
                        {'checkbox_save_recipient_to_addressbook'}
                        <div><input name="cs_copy" id="cs_copy" type="checkbox" value="1" /> {'txt_send_me_copy_this_card'}</div>
                        <div><input name="invite_show_decide_option" id="invite_show_decide_option" type="checkbox" value="0" /> {'invite_personal_message_if_announcement_card'}</div>
                    </div>
                    <div class="col-sm-4">
                        <label>{'fieldset_delivery_date'}</label>
                        {'show_delivery_date'}
                    </div>
                </div>
        	</div>
		</div>
		
		
		{'show_account_balance_if_ppc'}
		
		<!-- End Column Personal info-->
		</form>
		
		
		
    
    
    <div id="show_change_next_step_fav_toolbar" class="sendcard-toolbar">
			<span onclick="PreviewCard();" class="btn btn-default btn-sm">
            <i class="fa fa-eye padding5"></i>{'show_personalize_table_button_preview_card'}</span>
            <span onclick="SendToFriends();" class="btn btn-default btn-sm btn-my-site">
            <i class="fa fa-send padding5"></i>{'sendcard_php_button_send_now'}</span>
	</div>
    </div>
	<div class="recepient_address col-sm-3">
        {'show_address_book'}
    </div>
</div>
<!-----SCRIPT-------->
{'myloop'}
<!-----END----------->
<script type="text/javascript">

	document.getElementById("list_friend_name_1").value="{'show_list_friend_name_1'}";
	document.getElementById("list_friend_email_1").value="{'show_list_friend_email_1'}";

	function SendToFriends(){
		if(document.getElementById("invite_title").value==""){
			ShowPersonalizeTable();
			showid2("show_error_message_event_name","block");
			document.getElementById("invite_title").focus();			
			return false;
		}
		else if(document.getElementById("cs_from_name").value==""){
			ShowPersonalizeTable();
			document.getElementById("show_error_message_sender_info").innerHTML="{'txt_js_alert_must_enter_sender_name'}";
			showid2("show_error_message_sender_info","block");
			document.getElementById("cs_from_name").focus();			
			return false;
		}
		else if(!valid_email(document.getElementById("cs_from_email").value)){
			ShowPersonalizeTable();
			document.getElementById("show_error_message_sender_info").innerHTML="{'txt_js_alert_must_enter_sender_email'}";
			showid2("show_error_message_sender_info","block");
			document.getElementById("cs_from_email").focus();			
			return false;
		}
		else if(document.getElementById("cs_message").value==""){
			showNotification("{'invite_js_alert_must_enter_card_message'}");
			showid2('show_option_toolbar','block');
			showid2('div_card_body','block');
			showid2('show_change_next_step_fav_toolbar','block');
			showid2('div_textbox','block');
			showid2("div_edit_message","none");
			showid2('show_personalize_table','none');
			showid2("show_edit_sendnow_toolbar_top","none");
			showid2("show_edit_sendnow_toolbar_bottom","none");
			return false;
		}
		else if(document.ecardmax_personalize.invite_user_photo_filename.value=="1"){
			showNotification("{'invite_js_alert_must_insert_your_photo'}");
			showid2('show_option_toolbar','block');
			showid2('div_card_body','block');
			showid2('show_change_next_step_fav_toolbar','block');
			showid2('div_textbox','none');
			showid2("div_edit_message","block");
			showid2('show_personalize_table','none');
			showid2("show_edit_sendnow_toolbar_top","none");
			showid2("show_edit_sendnow_toolbar_bottom","none");
			return false;
		}
		else{
			var check_recipient_info=false;
			var data="";
			var list_friend_name="";
			var list_friend_email="";
			for(i=1;i<=re_num;i++){
				list_friend_name=document.getElementById("list_friend_name_"+i).value;
				list_friend_email=document.getElementById("list_friend_email_"+i).value;
				if(list_friend_name!="" && list_friend_email!=""){
					check_recipient_info=true;
					list_friend_name=list_friend_name.replace(";",",");
					data+=list_friend_name+";"+list_friend_email+"\n";
				}
				if(list_friend_name!="" && list_friend_email=="" || list_friend_name=="" && list_friend_email!=""){
					check_recipient_info=false;
					data="1";
					document.getElementById("show_error_message_"+i).innerHTML="{'txt_js_alert_missing_recipient'}";
					showid2("show_error_message_"+i,"block");
					document.getElementById("list_friend_name_"+i).focus();
				}
			}

			if(check_recipient_info==false){
				ShowPersonalizeTable();
				if(data==""){
					document.getElementById("show_error_message_1").innerHTML="{'txt_js_alert_must_enter_recipient_info'}";
					showid2("show_error_message_1","block");
					document.getElementById("list_friend_name_1").focus();
				}				
				return false;
			}
			else{
				if(document.getElementById("cs_copy").checked==true){
					list_friend_name=document.getElementById("cs_from_name").value;
					list_friend_name=list_friend_name.replace(";",",");
					list_friend_email=document.getElementById("cs_from_email").value;
					data+=list_friend_name+";"+list_friend_email;
				}
				document.ecardmax_personalize.list_email.value=data;
				document.ecardmax_personalize.invite_message.value=document.getElementById("cs_message").value;
				document.ecardmax_personalize.submit();
			}
		}
	}

	function PreviewCard(){		
		showid2('div_card_body','block');
		showid2("show_edit_sendnow_toolbar_top","block");
		showid2("show_edit_sendnow_toolbar_bottom","block");
		showid2("div_edit_message","none");
		showid2('show_personalize_table','none');		
		showid2('show_change_next_step_fav_toolbar','none');
		showid2("show_option_toolbar","none");
		showid2("show_change_next_step_fav_toolbar","none");
		showid2("button_insert_photo2","none");
	}
	
	function EditCard(){
		showid2('show_option_toolbar','block');
		showid2('div_card_body','block');
		showid2('show_change_next_step_fav_toolbar','block');
		showid2("div_edit_message","block");
		showid2('show_personalize_table','none');
		showid2("show_edit_sendnow_toolbar_top","none");
		showid2("show_edit_sendnow_toolbar_bottom","none");
		showid2("button_insert_photo2","block");
		jQuery("#first_step").removeClass("first").addClass("first_active");
		jQuery("#second_step").removeClass("second_active").addClass("second");
	}
	
	var getmapdata="0";
	function ShowMapYes(){
		showid2('show_map_table','block');
		if(getmapdata=="0"){
			document.getElementById("invite_map_address").value=document.getElementById("basic_event_street_address").value;
			document.getElementById("invite_map_city").value=document.getElementById("basic_event_city").value;
			document.getElementById("invite_map_state").value=document.getElementById("basic_event_state").value;
			document.getElementById("invite_map_zipcode").value=document.getElementById("basic_event_zipcode").value;
			getmapdata="1";
		}
	}

	var getreminderdata="0";
	function ShowAddReminderYes(){
		showid2('show_reminder_table','block');
		if(getreminderdata=="0"){
			document.getElementById("time_end_textbox3").value=document.getElementById("time_end_textbox1").value;
			getreminderdata="1";
		}
	}

	function ViewMap(){
		var address = document.getElementById("invite_map_address").value;
		var city = document.getElementById("invite_map_city").value;
		var state = document.getElementById("invite_map_state").value;
		var zipcode = document.getElementById("invite_map_zipcode").value;
		var q = escape(address + "," + city + "," + state + "," + zipcode + ",");
		var google_url = "http://www.google.com/maphp?hl=en&ie=UTF8&om=1&q=" + q ;
		var screenW = screen.width;
		var screenH = screen.height;
		window.open(google_url, null,'height=' + screenH + ',width=' + screenW + ',status=no,toolbar=no,menubar=no,location=no,scrollbars=yes');
	}

</script>