<form name="form1" method="post" action="index.php" enctype='multipart/form-data'>
<input type="hidden" name="step" value="{'step'}" />
<input type="hidden" name="what" value="" />
<h1><img border="0" src="html/07_icon_poem2.gif" alt="" style="vertical-align:middle" /> {'poem_txt_page_title'} 
({'poem_txt_total'} {'count_total'})</h1>
<div style="border:1px solid silver;padding:4px;cursor:pointer;line-height:20px;background-image: url(html/07_title_background2.gif);font-weight:bold" onclick="showid('show_add_table');"><img border="0" src="html/07_icon_add22.gif" alt="" style="vertical-align:middle" /> {'poem_txt_click_here_new_poem'}</div><br />
<div style="width:100%;display:none" id="show_add_table">	
	<table width="100%" style="background-color:silver" cellspacing="1" cellpadding="4">
		<tr style="background-image: url(html/07_title_background.gif);line-height:17px;font-weight:bold">
			<td width="100%" style="cursor:pointer" onclick="showid('show_add_table');" colspan="2"><div style="float:left;">{'poem_txt_add_new_poem'}</div><img border="0" src="html/07_icon_button_close.gif" title="{'poem_tooltip_close_hide'}" alt="{'poem_tooltip_close_hide'}" style="vertical-align:middile;float:right;" /></td>
		</tr>	
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'poem_txt_poem_title'}</td>
			<td width="80%"><input onkeypress="return noEnterKey(event);" type="text" name="poem_title" id="poem_title" style="width:90%;text-align:center;font-weight:bold;font-size:14px;" /></td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'poem_txt_poem_author'}</td>
			<td width="80%"><input onkeypress="return noEnterKey(event);" type="text" name="poem_author" id="poem_author" style="width:90%;text-align:center;font-size:10px;" /></td>
		</tr>	
        <tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'poem_txt_poem_cat'}</td>
			<td width="80%">{'option_category_add'}</td>
		</tr>
		
		
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%" valign="top">Suggest Message Body</td>
			<td width="80%"><textarea name="poem_body" id="poem_body" style="width:90%;height:300px;text-align:center"></textarea></td>
		</tr>		
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%"></td>
			<td width="80%"><input type="button" value="{'poem_txt_button_add_new_poem'}" class="button" onclick="AddNewPoem();" /></td>
		</tr>		
	</table><br />	
</div>
<div style="border:1px solid silver;padding:4px;cursor:pointer;line-height:20px;background-image: url(html/07_title_background2.gif);font-weight:bold" onclick="showid('show_add_table_cat');"><img border="0" src="html/07_icon_add22.gif" alt="" style="vertical-align:middle" /> {'poem_txt_click_here_new_poem_cat'}</div><br />
<div style="width:100%;display:none" id="show_add_table_cat">	
	<table width="100%" style="background-color:silver" cellspacing="1" cellpadding="4">
		<tr style="background-image: url(html/07_title_background.gif);line-height:17px;font-weight:bold">
			<td width="100%" style="cursor:pointer" onclick="showid('show_add_table');" colspan="2"><div style="float:left;">{'poem_txt_add_new_poem_cat'}</div><img border="0" src="html/07_icon_button_close.gif" title="{'poem_tooltip_close_hide'}" alt="{'poem_tooltip_close_hide'}" style="vertical-align:middile;float:right;" /></td>
		</tr>	
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'poem_txt_poem_cat_title'}</td>
			<td width="80%"><input onkeypress="return noEnterKey(event);" type="text" name="poem_cat_name" id="poem_cat_name" style="width:90%;font-size:14px;" /></td>
		</tr>
		<!--tr style="background-color: #EAEAEA;line-height:17px" style="d">
			<td width="20%">{'poem_txt_poem_cat_cat'}</td>
			<td width="80%">{'show_categogy_parent'}</td>
		</tr-->			
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%"></td>
			<td width="80%"><input type="button" value="{'poem_txt_button_add_new_poem'}" class="button" onclick="AddNewPoemCat();" /></td>
		</tr>		
	</table><br />	
</div>
<table width="100%" align="center" style="background-color: silver;" cellspacing="1" cellpadding="3">			
	<tr style="line-height:20px;background-image: url(html/07_title_background.gif);font-weight:bold">
		<td width="80%" align="left" style="padding:4px;white-space:nowrap">{'poem_txt_poem_cat_title'}</td>
        <!--td width="1%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_poem_cat_cat'}</td-->
        <td width="20%" align="center" style="padding:4px;white-space:nowrap"><!--input onkeypress="return noEnterKey(event);" id="chk_all_cat" title="{'poem_txt_tooltip_select_all'}" type="checkbox" value="ON" onclick="check_uncheck_all('{'bk_id_cat'}');" /--></td>
	</tr>	
	{'show_list_cat_table'}
    <tr style="line-height:20px;background-image: url(html/07_title_background.gif);">
    	<td colspan="2" align="right"></td>
		<td colspan="1" align="center"><input type="button" value="{'poem_txt_button_delete_selected'}" class="button" onclick="CheckSelectedCat();" /> <img border="0" src="html/pointer.gif" alt="" style="vertical-align:middle" /></td>
	</tr>	
</table>
<div><strong>{'poem_txt_tips'}:</strong></div>
{'poem_txt_tips_content'}{'show_info'}
<table width="100%" align="center" style="background-color: silver;" cellspacing="1" cellpadding="3">			
	<tr style="line-height:20px;background-image: url(html/07_title_background.gif);font-weight:bold">
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_icon'}</td>
        <td width="1%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_cat'}</td>
		<td width="*" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_poem_title_author_body'}</td>
		<td width="12%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_enable_disable'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_sort_order'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'poem_txt_column_name_delete'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap"><input onkeypress="return noEnterKey(event);" id="chk_all" title="{'poem_txt_tooltip_select_all'}" type="checkbox" value="ON" onclick="check_uncheck_all('{'bk_id'}');" /></td>
	</tr>	
	{'show_list_table'}
	<tr style="line-height:20px;background-image: url(html/07_title_background.gif);">
		<td width="100%" colspan="7">
			<table border="0" width="100%" cellspacing="0" cellpadding="0">
			<tr>
				<td width="50%"><strong>{'poem_txt_row_per_page'}</strong> <input type="text" name="row_number" size="10" value="{'row_number'}" onkeypress="return isNumberKey(event)" onchange="document.form1.submit();" /></td>
				<td width="50%" align="right"><input type="button" value="{'poem_txt_button_delete_selected'}" class="button" onclick="CheckSelected();" /> <img border="0" src="html/pointer.gif" alt="" style="vertical-align:middle" /></td>
			</tr>
			</table>
		</td>
	</tr>	
</table>
{'display_page_number'}
<div id="view_fullsize_table" style="display:none;position:absolute;top:0;left:0;z-index:9;border:thick solid #FCAA03;width:500px">
	<div style="cursor:pointer;padding:5px;background-image: url(html/07_title_background.gif);font-weight:bold" onclick="HideItAll();" title="{'poem_tooltip_click_here_to_close'}">
		<table border="0" width="100%" cellspacing="0" cellpadding="0">
		<tr>
			<td align="left" width="99%">{'poem_txt_preview_poem'}</td>
			<td align="right" width="1%"><img border="0" src="html/07_icon_button_close.gif" title="{'poem_tooltip_close_hide'}" alt="{'poem_tooltip_close_hide'}" /></td>
		</tr>
		</table>
	 </div>
	<div id="print_poem_body" style="padding:5px;text-align:center;background-color:lightyellow;cursor:pointer" title="{'poem_tooltip_click_here_to_close'}" onclick="HideItAll();"></div>
</div>

</form>
<script type="text/javascript">

var myid="{'bk_id'}";
var array=myid.split(",");
var myidcat="{'bk_id_cat'}";
var arraycat=myidcat.split(",");
function editPoemCat(id,name){
	Editme('index.php?step=edit_me&table=max_poem_category&edit_id=id&edit_id_value='+id+'&edit_key=name&edit_value=',name);
}
function setCategoryParent(id,parent){
	Editme('index.php?step=edit_me&table=max_poem_category&edit_id=id&edit_id_value='+id+'&edit_key=parent&edit_value=',parent);
}
function setCategory(poem,cat){
	Editme('index.php?step=edit_me&table=max_poem&edit_id=poem_id&edit_id_value='+poem+'&edit_key=poem_cat&edit_value=',cat);
}
function HideItAll(){		
	for(i=0;i<array.length;i++){
		document.getElementById('cell'+array[i]).style.border="0px";
		document.getElementById('cell'+array[i]).style.backgroundColor="";
	}
	document.getElementById('hidden_iframe').style.display="none";
	document.getElementById('view_fullsize_table').style.display="none";
}

function ShowPoem(id){
	var poem_body="<br/>"+document.getElementById("poem_body"+id).value +"<br /><br />";
	poem_body=poem_body.replace(/[\r]/gi,"");
	poem_body=poem_body.replace(/[\n]/gi,"<br />");

	var get_text ="<div style=\"font-weight:bold;font-size:14px\"><br />"+document.getElementById("poem_title"+id).value+"</div>" + "<div style=\"font-size:10px\">"+document.getElementById("poem_author"+id).value+"</div>" + "<div>"+poem_body+"</div>";
	document.getElementById('print_poem_body').innerHTML= get_text; 
	ShowLoaderImage("loading...");
	ShowDivCenterPage('view_fullsize_table');
	setTimeout("showid2('show_loading','none');showid2('hidden_iframe','none');",700);
}

function AddNewPoemCat(){	
	if(document.form1.poem_cat_name.value==""){
		alert("{'poem_message_poem_cat_title_required'}");
		document.form1.poem_cat_name.focus();
	}
	else{
		document.form1.what.value='add_new_cat';
		document.form1.submit();
	}
}

function AddNewPoem(){	
	/*if(document.form1.poem_author.value==""){
		alert("{'poem_message_poem_author_required'}");
		document.form1.poem_author.focus();
	}*/
	if(document.form1.poem_title.value==""){
		alert("{'poem_message_poem_title_required'}");
		document.form1.poem_title.focus();
	}
	else if(document.form1.poem_body.value==""){
		alert("{'poem_message_poem_body_required'}");
		document.form1.poem_body.focus();
	}
	else{
		document.form1.what.value='add_new';
		document.form1.submit();
	}
}

function CheckSelected(){
	if(myid!=""){
		var selected_id="";
		for(i=0;i<=array.length-1;i++){
			if(document.getElementById("bk" + array[i]).checked)
				selected_id += "&mylist_id" + array[i] + "=" + document.getElementById("bk" + array[i]).value ;
		}
		if(selected_id==""){
			alert("{'poem_message_checkbox_first'}");
		}
		else{
			DeleteSelected();
		}
	}
}
function CheckSelectedCat(){
	if(myidcat!=""){
		var selected_id="";
		for(i=0;i<=arraycat.length-1;i++){
			if(document.getElementById("bk_cat" + arraycat[i]).checked)
				selected_id += "&mylist_id_cat" + arraycat[i] + "=" + document.getElementById("bk_cat" + arraycat[i]).value ;
		}
		if(selected_id==""){
			alert("{'poem_message_checkbox_first'}");
		}
		else{
			DeleteSelectedCat();
		}
	}
}
function DeleteSelectedCat(){
	var selected_id="";	
	for(i=0;i<=arraycat.length-1;i++){
		if(document.getElementById("bk_cat" + arraycat[i]).checked)
			selected_id += "&mylist_id_cat" + arraycat[i] + "=" + document.getElementById("bk_cat" + arraycat[i]).value ;
	}

	url="index.php?step={'step'}&what=delete_selected_cat"+selected_id+"&page={'page'}&row_number={'row_number'}";
	if(window.confirm("{'poem_message_confirm_to_delete'}")){
		location.href=url;
	}
	else{
		document.getElementById("chk_all_cat").checked=false;
		check_uncheck_all('{'bk_id_cat'}');
	}
}
function DeleteSelected(){
	var selected_id="";	
	for(i=0;i<=array.length-1;i++){
		if(document.getElementById("bk" + array[i]).checked)
			selected_id += "&mylist_id" + array[i] + "=" + document.getElementById("bk" + array[i]).value ;
	}

	url="index.php?step={'step'}&what=delete_selected"+selected_id+"&page={'page'}&row_number={'row_number'}";
	if(window.confirm("{'poem_message_confirm_to_delete'}")){
		location.href=url;
	}
	else{
		document.getElementById("chk_all").checked=false;
		check_uncheck_all('{'bk_id'}');
	}
}
</script>