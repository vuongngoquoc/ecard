<form name="form1" method="post" action="index.php" enctype='multipart/form-data'>
<input type="hidden" name="step" value="{'step'}" />
<input type="hidden" name="what" value="" />
<h1><img border="0" src="html/07_icon_game2.gif" alt="" style="vertical-align:middle" /> {'games_txt_page_title'} 
({'games_txt_total'} {'count_total'})</h1>
<div style="border:1px solid silver;padding:4px;cursor:pointer;line-height:20px;background-image: url(html/07_title_background2.gif);font-weight:bold" onclick="showid('show_add_table');"><img border="0" src="html/07_icon_add22.gif" alt="" style="vertical-align:middle" /> {'games_txt_click_here_to_add_new_game'}</div><br />
<div style="width:100%;display:none" id="show_add_table">	
	<table width="100%" style="background-color:silver" cellspacing="1" cellpadding="4">
		<tr style="background-image: url(html/07_title_background.gif);line-height:17px;font-weight:bold">
			<td width="100%" style="cursor:pointer" onclick="showid('show_add_table');" colspan="2"><div style="float:left;">{'games_txt_add_new_game'}</div><img border="0" src="html/07_icon_button_close.gif" title="{'games_tooltip_close_hide'}" alt="{'games_tooltip_close_hide'}" style="vertical-align:middile;float:right;" /></td>
		</tr>		
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'games_txt_game_title'}</td>
			<td width="80%"><input type="text" name="game_title" id="game_title" style="width:90%" /></td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%" valign="top">{'games_txt_game_info_message_html_ok'}</td>
			<td width="80%"><textarea name="game_intro_message" id="game_intro_message" style="width:90%;height:300px" ></textarea></td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'games_txt_game_image_thumbnail_url'}</td>
			<td width="80%"><input type="text" name="game_thumb_url" id="game_thumb_url" style="width:90%" value="{'ecard_url'}/resource/games/" /><br /><strong style="font-size:8pt">{'games_txt_example'}: {'ecard_url'}/resource/games/[NEW_FOLDER]/thumbnail.gif</strong></td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'games_txt_game_main_url'}</td>
			<td width="80%"><input type="text" name="game_url" id="game_url" style="width:90%" value="{'ecard_url'}/resource/games/" /><br /><strong style="font-size:8pt">{'games_txt_example'}: {'ecard_url'}/resource/games/[NEW_FOLDER]/index.php</strong></td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'games_txt_open_this_game_in'} </td>
			<td width="80%">
				<select size="1" name="game_open_popup" id="game_open_popup" onchange="if(this.value=='1'){showid2('setwindowtable','block');}else{showid2('setwindowtable','none');}">
				<option value="0">{'games_txt_same_window'}</option>
				<option value="1">{'games_txt_pop_window'}</option>
				</select>
				<div id="setwindowtable" style="display:none"><br />
					{'games_txt_window_width'}: <input type="text" name="game_popup_width" id="game_popup_width" value="650" onkeypress="return isNumberKey(event)" maxlength="4" size="15" /> px - {'games_txt_window_height'}: <input type="text" name="game_popup_height" id="game_popup_height" value="772" onkeypress="return isNumberKey(event)" maxlength="4" size="15" /> px
				</div>
			</td>
		</tr>
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%">{'games_txt_active_this_game_now'}</td>
			<td width="80%"><input type="checkbox" checked="checked" name="game_active" id="game_active" value="1" /></td>
		</tr>		
		<tr style="background-color: #EAEAEA;line-height:17px">
			<td width="20%"></td>
			<td width="80%"><input type="button" value="{'games_button_add_new_game'}" class="button" onclick="AddNew();" /></td>
		</tr>
		
	</table><br />
</div>
<div><strong>{'games_txt_tips'}:</strong></div>
{'games_txt_tips_detail'}{'show_info'}
<table width="100%" align="center" style="background-color: silver;" cellspacing="1" cellpadding="3">			
	<tr style="line-height:20px;background-image: url(html/07_title_background.gif);font-weight:bold">
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'games_txt_column_name_thumbnail'}</td>
		<td width="*" style="padding:4px;white-space:nowrap">{'games_txt_column_name_game_title_message'}</td>
		<td width="*" align="center" style="padding:4px;white-space:nowrap">{'games_txt_column_name_open_game_type'}</td>
		<td width="12%" align="center" style="padding:4px;white-space:nowrap">{'games_txt_column_name_enable_disable'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'games_txt_column_name_sort_order'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap">{'games_txt_column_name_delete'}</td>
		<td width="1%" align="center" style="padding:4px;white-space:nowrap"><input onkeypress="return noEnterKey(event);" id="chk_all" title="{'games_tooltip_select_all'}" type="checkbox" value="ON" onclick="check_uncheck_all('{'bk_id'}');" /></td>
	</tr>	
	{'show_list_table'}
	<tr style="line-height:20px;background-image: url(html/07_title_background.gif);">
		<td width="100%" colspan="7">
			<table border="0" width="100%" cellspacing="0" cellpadding="0">
			<tr>
				<td width="50%"><strong>{'games_tooltip_row_per_page'}</strong> <input type="text" name="row_number" size="10" value="{'row_number'}" onkeypress="return isNumberKey(event)" onchange="document.form1.submit();" /></td>
				<td width="50%" align="right"><input type="button" value="{'games_button_delete_selected'}" class="button" onclick="CheckSelected();" /> <img border="0" src="html/pointer.gif" alt="" style="vertical-align:middle" /></td>
			</tr>
			</table>
		</td>
	</tr>
</table>
{'display_page_number'}
</form>
<script type="text/javascript">

var myid="{'bk_id'}";
var array=myid.split(",");

function AddNew(){	
	
	if(document.form1.game_title.value==""){
		alert("{'games_message_game_title_required'}");
		document.form1.game_title.focus();
		return false;
	}
	else if(document.form1.game_intro_message.value==""){
		alert("{'games_message_game_message_required'}");
		document.form1.game_intro_message.focus();
		return false;
	}
	else if(document.form1.game_thumb_url.value=="" || document.form1.game_thumb_url.value=="{'ecard_url'}/resource/games/" ){
		alert("{'games_message_game_image_thumbnail_url_required'}");
		document.form1.game_thumb_url.focus();
		return false;
	}
	else if(document.form1.game_url.value=="" || document.form1.game_url.value=="{'ecard_url'}/resource/games/" ){
		alert("{'games_message_game_main_url_required'}");
		document.form1.game_url.focus();
		return false;
	}
	else if(document.getElementById("setwindowtable").style.display=="block"){
		if(document.form1.game_popup_width.value=="" || document.form1.game_popup_height.value=="" ){
			alert("{'games_message_pop_up_width_and_height_required'}");
			document.form1.game_popup_width.focus();
			return false;
		}
	}
	
	document.form1.what.value='add_new';
	document.form1.submit();		
}

function CheckSelected(){
	if(myid!=""){
		var selected_id="";
		for(i=0;i<=array.length-1;i++){
			if(document.getElementById("bk" + array[i]).checked)
				selected_id += "&mylist_id" + array[i] + "=" + document.getElementById("bk" + array[i]).value ;
		}
		if(selected_id==""){
			alert("{'games_message_checkbox_first'}");
		}
		else{
			DeleteSelected();
		}
	}
}

function DeleteSelected(){
	var selected_id="";	
	for(i=0;i<=array.length-1;i++){
		if(document.getElementById("bk" + array[i]).checked)
			selected_id += "&mylist_id" + array[i] + "=" + document.getElementById("bk" + array[i]).value ;
	}

	url="index.php?step={'step'}&what=delete_selected"+selected_id+"&page={'page'}&row_number={'row_number'}";
	if(window.confirm("{'games_message_confirm_to_delete'}")){
		location.href=url;
	}
	else{
		document.getElementById("chk_all").checked=false;
		check_uncheck_all('{'bk_id'}');
	}
}

function HideItAll(){
	for(i=0;i<array.length;i++){
		document.getElementById('cell'+array[i]).style.border="0px";
		document.getElementById('cell'+array[i]).style.backgroundColor="";
		document.getElementById('popup_title'+array[i]).style.display="none";
		document.getElementById('popup_info'+array[i]).style.display="none";
	}
	document.getElementById('hidden_iframe').style.display="none";
}

function HighLightCell(id){
	document.getElementById('cell'+id).style.border="thick solid #FCAA03";
	document.getElementById('cell'+id).style.backgroundColor="#FAEDC8";
}
</script>